<section class="section-title">
  <h2>Kurikulum Kelas</h2>
</section>

<div *ngIf="roleCode === roles.TUTOR" class="form-group d-flex justify-content-end">
  <label for="">View :&nbsp;</label>
  <select [(ngModel)]="selectedView" (ngModelChange)="onChangeOperation($event)" class="shadow-sm">
    <option [value]="viewType.VIEW_ONLY">View Only</option>
    <option [value]="viewType.OPERATION_VIEW">Operation View</option>
  </select>
</div>

<ng-template ngFor let-module [ngForOf]="modules.modulesAndMaterials" let-i="index">
  <div class="row">
    <div class="col-sm-12 course-section">
      <div class="section-title d-flex justify-content-between align-items-center pl-3 py-2">
        {{module.module.idModule.moduleName}}
        <div *ngIf="selectedView == viewType.OPERATION_VIEW">
          <a [routerLink]="['../../add-material', module.module.id]" class="btn btn-add">
            Add Material
          </a>
        </div>
      </div>

      <ul class="section-list">
        <ng-template ngFor let-material [ngForOf]="module.learningMaterials" let-i="index">
          
          <li class="section-item d-flex justify-content-between py-2 align-items-center">
            <div class="item">
              <div class="title-container">
                <span class="material-icon">
                  <i class="fas fa-file-alt"></i>
                </span>
                <ng-template [ngIf]="material.statusPresent.status === 200">
                  <a [routerLink]="['../../../material']" [queryParams]="{ idDtlClass: idDetailClass, idDtlModuleRgs: material.learningMaterial.id}">
                    <span class="material-name">
                      {{ material.learningMaterial.idLearningMaterial.learningMaterialName }}
                    </span>
                  </a>
                </ng-template>
                <span class="material-name" *ngIf="material.statusPresent.status === 400">
                  {{ material.learningMaterial.idLearningMaterial.learningMaterialName }}
                </span>
              </div>
            </div>
          
            <div class="d-flex">
              
              <div *ngIf="material.statusPresent.type === 'badge' else btn" class="material-icon">
                <span class="badge badge-{{material.statusPresent.style}}"> {{material.statusPresent.msg}}</span>
              </div>

              <ng-template #btn>
                <div class="material-icon">
                  <button (click)="present(material.learningMaterial.id)" class="btn btn-{{material.statusPresent.style}}">
                    {{ material.statusPresent.msg }}
                  </button>
                </div>
              </ng-template>

              <ng-template [ngIf]="selectedView == viewType.OPERATION_VIEW">
                <span class="material-icon">
                  <a [routerLink]="['../../edit-material', material.learningMaterial.id]" class="btn btn-info rounded">
                    <i class="fas fa-edit"></i>
                  </a>
                </span>

                <span class="material-icon">
                  <button class="btn btn-danger rounded-circle">
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </span>
              </ng-template>
            </div>
          </li>
        </ng-template>

      </ul>
    </div>
  </div>
</ng-template>
